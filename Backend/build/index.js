(()=>{"use strict";var e={863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUseCase=void 0;var n=r(779),o=function(){function e(e){this.repository=e}return e.prototype.createUser=function(e,t,r){var o={id:this.repository.getNextID(),name:e,email:t,password:r},s=n.UserCreator.createUser(o);return this.repository.create(s),s},e}();t.CreateUseCase=o},828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.delete=function(e){return this.repository.delete(e)},e}();t.DeleteUseCase=r},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAll=function(){return this.repository.getAll()},e}();t.GetAllUseCase=r},777:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetOneUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getOne=function(e){return this.repository.getOne(e)},e}();t.GetOneUseCase=r},371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.update=function(e,t,r){return this.repository.update(e,t,r)},e}();t.UpdateUseCase=r},880:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;t.User=function(e){this.name=e.name,this.id=e.id,this.email=e.email,this.password=e.password}},779:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserCreator=void 0;var n=r(880),o=function(){function e(){}return e.createUser=function(e){return new n.User(e)},e}();t.UserCreator=o},338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserRepository=void 0;var r=function(){function e(){this.idCounter=0,this.Users=[{id:this.idCounter++,name:"jose",email:"jose",password:"jose"},{id:this.idCounter++,name:"jose2",email:"jose2",password:"jose2"}]}return e.prototype.getNextID=function(){return this.idCounter++},e.prototype.create=function(e){this.Users.push(e)},e.prototype.getAll=function(){return this.Users},e.prototype.getOne=function(e){var t=this.Users.findIndex((function(t){return t.id===e}));return this.Users[t]},e.prototype.delete=function(e){var t=this.Users.findIndex((function(t){return t.id===e}));return this.Users.splice(t,1),t},e.prototype.update=function(e,t,r){var n=this.Users.findIndex((function(t){return t.id===e}));return-1!==n?(this.Users[n].name=t,this.Users[n].password=r,this.Users[n]):n},e}();t.UserRepository=r},750:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserController=void 0;var o=r(338),s=n(r(860)),a=r(576),i=r(777),u=r(371),d=r(863),c=r(828);t.UserController=function(){var e=new o.UserRepository,t=s.default.Router();return t.get("/",(function(t,r){var n=new a.GetAllUseCase(e).getAll();r.json(n)})),t.get("/:id",(function(t,r){var n=parseInt(t.params.id),o=new i.GetOneUseCase(e).getOne(n);o?r.json(o):r.status(404).json({message:"Elemento no encontrado"})})),t.post("/",(function(t,r){var n=new d.CreateUseCase(e);if("object"==typeof t.body&&"name"in t.body){var o=t.body.name,s=t.body.email,a=t.body.password,i=n.createUser(o,s,a);r.status(201).json(i)}else r.status(400).json({error:"El cuerpo de la solicitud no es-NLS"})})),t.delete("/:id",(function(t,r){var n=parseInt(t.params.id);-1!==new c.DeleteUseCase(e).delete(n)?r.send("Elemento borrado correctamente"):r.status(404).json({message:"Elemento no encontrado"})})),t.post("/:id",(function(t,r){var n=parseInt(t.params.id),o=t.body.name,s=t.body.password,a=new u.UpdateUseCase(e).update(n,o,s);-1!==a?r.send("Elemento actualizado correctamente: "+JSON.stringify(a)):r.status(404).json({message:"Elemento no encontrado"})})),t}},341:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(860)),s=r(954),a=r(750),i=(0,o.default)();i.use(o.default.json());var u=(0,s.SummaryController)(),d=(0,a.UserController)();i.use("/summaries",u),i.use("/users",d),i.listen(3e3,(function(){return console.log("Server started on port ".concat(3e3))})),t.default=i},981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSummariesUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAllSumaries=function(){return this.repository.getAll()},e}();t.getAllSummariesUC=r},605:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(738),o=function(){function e(e){this.repository=e}return e.prototype.cresateSummary=function(e,t,r,o,s,a,i,u){var d={id:this.repository.getNextID(),name:e,likes:u,pdf:t,sum_desc:r,subject:o,career:s,lenght:a,up_date:i},c=n.SummaryCreator.createSummary(d);return this.repository.create(c),c},e}();t.default=o},600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSummaryUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.deleteSummary=function(e){return this.repository.delete(e)},e}();t.deleteSummaryUC=r},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSummaryByIdUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getSummaryById=function(e){return this.repository.getOne(e)},e}();t.getSummaryByIdUC=r},310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateSummaryUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.updateSummary=function(e,t){return this.repository.update(e,t)},e}();t.UpdateSummaryUC=r},991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=void 0;t.Summary=function(e){this.name=e.name,this.id=e.id,this.likes=e.likes,this.pdf=e.pdf,this.sum_desc=e.sum_desc,this.subject=e.subject,this.career=e.career,this.lenght=e.lenght,this.up_date=e.up_date}},738:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryCreator=void 0;var n=r(991),o=function(){function e(){}return e.createSummary=function(e){return new n.Summary(e)},e}();t.SummaryCreator=o},287:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function i(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(418)),i=r(113),u=a.default.createPool({host:"localhost",user:"root",password:"",database:"summary_db",port:3306}),d=function(){function e(){}return e.prototype.getNextID=function(){return(0,i.randomUUID)()},e.prototype.getAll=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,u.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,likes FROM Summaries;")];case 1:return[2,e.sent()[0]]}}))}))},e.prototype.create=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e.id,e.name,e.lenght,e.up_date,e.sum_desc,e.pdf,e.career,e.subject,e.likes],[4,u.execute("INSERT INTO Summaries(id,name,lenght,up_date,sum_desc,pdf,career,subject,likes) VALUES(UUID_TO_BIN(?), ?,?, ?, ?, ?, ?, ?, ?);",t)];case 1:return r.sent(),[2]}}))}))},e.prototype.getOne=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,u.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,likes FROM Summaries WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()[0][0]]}}))}))},e.prototype.delete=function(e){try{var t=[e];u.execute("DELETE FROM Summaries WHERE id = UUID_TO_BIN(?);",t)}catch(e){console.log(e)}return e},e.prototype.update=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=[t,e],[4,u.execute("UPDATE Summaries SET name = ? WHERE id = UUID_TO_BIN(?);",r)];case 1:return[2,n.sent()[0][0]]}}))}))},e}();t.default=d},192:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDSummarySchemaValidation=void 0;var n=r(316);t.IDSummarySchemaValidation=n.z.object({id:n.z.string().uuid()})},631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadSummarySchemaValidation=void 0;var n=r(316);t.UploadSummarySchemaValidation=n.z.object({name:n.z.string(),pdf:n.z.string(),sum_desc:n.z.string(),subject:n.z.string(),career:n.z.string(),lenght:n.z.number(),up_date:n.z.string(),likes:n.z.number()})},954:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryController=void 0;var o=n(r(287)),s=n(r(860)),a=r(981),i=n(r(605)),u=r(962),d=r(600),c=r(310),l=r(192),p=r(631);t.SummaryController=function(){var e=new o.default,t=s.default.Router();return t.get("/",(function(t,r){new a.getAllSummariesUC(e).getAllSumaries().then((function(e){r.json(e)}))})),t.get("/:id",(function(t,r){var n=t.params.id,o=new u.getSummaryByIdUC(e),s=l.IDSummarySchemaValidation.safeParse({id:n});if(s.success){var a=o.getSummaryById(s.data.id);null==a||a.then((function(e){r.json(e)}))}else r.status(404).json({message:"Elemento no encontrado"})})),t.post("/",(function(t,r){var n=p.UploadSummarySchemaValidation.safeParse(t.body);if(n.success){var o=new i.default(e).cresateSummary(n.data.name,n.data.pdf,n.data.sum_desc,n.data.subject,n.data.career,n.data.lenght,n.data.up_date,n.data.likes);r.status(201).json(o)}else r.status(400).json({error:"El cuerpo de la solicitud no es válido"})})),t.delete("/:id",(function(t,r){var n=t.params.id;l.IDSummarySchemaValidation.safeParse({id:n}).success?(new d.deleteSummaryUC(e).deleteSummary(n),r.send("Elemento borrado correctamente")):r.status(404).json({message:"Elemento no encontrado"})})),t.post("/:id",(function(t,r){var n=t.params.id,o=l.IDSummarySchemaValidation.safeParse({id:n});if(o.success&&t.body.name){var s=new c.UpdateSummaryUC(e).updateSummary(o.data.id,t.body.name);r.send("Elemento actualizado correctamente: "+JSON.stringify(s))}else r.status(404).json({message:"Elemento no encontrado"})})),t}},860:e=>{e.exports=require("express")},418:e=>{e.exports=require("mysql2/promise")},316:e=>{e.exports=require("zod")},113:e=>{e.exports=require("crypto")}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(341)})();