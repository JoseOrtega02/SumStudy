(()=>{"use strict";var e={863:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUseCase=void 0;var o=r(779),i=function(){function e(e){this.repository=e}return e.prototype.createUser=function(e){var t=this.repository.getNextID(),r=n({id:t},e),i=o.UserCreator.createUser(r);return this.repository.create(i),i},e}();t.CreateUseCase=i},828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.delete=function(e){return this.repository.delete(e)},e}();t.DeleteUseCase=r},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAll=function(){return this.repository.getAll()},e}();t.GetAllUseCase=r},777:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetOneUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getOne=function(e){return this.repository.getOne(e)},e}();t.GetOneUseCase=r},371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.update=function(e,t){return this.repository.update(e,t)},e}();t.UpdateUseCase=r},880:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;t.User=function(e){this.name=e.name,this.id=e.id,this.email=e.email,this.password=e.password}},779:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserCreator=void 0;var n=r(880),o=function(){function e(){}return e.createUser=function(e){return new n.User(e)},e}();t.UserCreator=o},338:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserRepository=void 0;var a=i(r(418)),u=r(113),s=a.default.createPool({host:"localhost",user:"root",password:"",database:"summary_db",port:3306}),c=function(){function e(){}return e.prototype.getNextID=function(){return(0,u.randomUUID)()},e.prototype.create=function(e){var t=[e.id,e.name,e.email,e.password];s.execute("INSERT INTO Users (id, name, email, password) VALUES (UUID_TO_BIN(?), ?, ?, ?);",t)},e.prototype.getAll=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,s.execute("SELECT BIN_TO_UUID(id) as id, name, email, password FROM Users;")];case 1:return[2,e.sent()[0]]}}))}))},e.prototype.getOne=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,s.execute("SELECT BIN_TO_UUID(id) as id, name, email, password FROM Users WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()[0][0]]}}))}))},e.prototype.delete=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,s.execute("DELETE FROM Users WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()]}}))}))},e.prototype.update=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=[e.name,e.email,e.password,t],[4,s.execute("UPDATE Users SET name = ?, email = ?, password = ? WHERE id = UUID_TO_BIN(?);",r)];case 1:return[2,n.sent()]}}))}))},e}();t.UserRepository=c},585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDUserSchemaValidation=void 0;var n=r(316);t.IDUserSchemaValidation=n.z.object({id:n.z.string().uuid()})},871:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UploadUserSchemaValidation=void 0;var o=n(r(316));t.UploadUserSchemaValidation=o.default.object({name:o.default.string(),email:o.default.string(),password:o.default.string()})},750:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserController=void 0;var i=r(863),a=r(828),u=r(576),s=r(777),c=r(371),l=r(585),f=r(871),d=function(){function e(){}return e.prototype.getAllUsers=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,new u.GetAllUseCase(e).getAll()];case 1:return[2,t.sent()]}}))}))},e.prototype.getOne=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){return(r=l.IDUserSchemaValidation.safeParse({id:e})).success?[2,new s.GetOneUseCase(t).getOne(e)]:[2,r.error]}))}))},e.prototype.createUser=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){return(r=f.UploadUserSchemaValidation.safeParse(e)).success?[2,new i.CreateUseCase(t).createUser(e)]:[2,r.error]}))}))},e.prototype.deleteUser=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return(r=l.IDUserSchemaValidation.safeParse({id:e})).success?[4,new a.DeleteUseCase(t).delete(e)]:[3,2];case 1:return[2,{afectedRows:n.sent()[0].affectedRows}];case 2:return[2,r.error]}}))}))},e.prototype.updateUser=function(e,t,r){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return(n=f.UploadUserSchemaValidation.safeParse(e)).success?[4,new c.UpdateUseCase(r).update(e,t)]:[3,2];case 1:return[2,{afectedRows:o.sent()[0].affectedRows}];case 2:return[2,n.error]}}))}))},e}();t.UserController=d},362:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserHandler=void 0;var o=r(338),i=n(r(860)),a=r(750);t.UserHandler=function(){var e=new o.UserRepository,t=new a.UserController,r=i.default.Router();return r.get("/",(function(r,n){t.getAllUsers(e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):n.json(e)}))})),r.get("/:id",(function(r,n){var o=r.params.id;t.getOne(o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):void 0===e?n.status(404).json({message:"Elemento no encontrado"}):n.json(e)}))})),r.post("/",(function(r,n){var o=r.body;t.createUser(o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):n.json(e)}))})),r.delete("/:id",(function(r,n){var o=r.params.id;t.deleteUser(o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):0===e.afectedRows?n.status(404).json({message:"Elemento no encontrado"}):1===e.afectedRows&&n.json({message:"Elemento eliminado"})}))})),r.post("/:id",(function(r,n){var o=r.params.id,i=r.body,a=t.updateUser(i,o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:a}):0===(null==e?void 0:e.afectedRows)?n.status(404).json({message:"Elemento no encontrado"}):1===(null==e?void 0:e.afectedRows)?n.json("Elemento actualizado"):n.json(e)}))})),r}},341:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(860)),i=r(362),a=r(592),u=r(127),s=(0,o.default)();s.use(o.default.json());var c=(0,a.SummaryHandler)(),l=(0,i.UserHandler)(),f=(0,u.LikeHandler)();s.use("/summaries",c),s.use("/likes",f),s.use("/users",l),s.listen(3e3,(function(){return console.log("Server started on port ".concat(3e3))})),t.default=s},981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllSummariesUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAllSumaries=function(e,t){return this.repository.getAll(e,t)},e}();t.getAllSummariesUC=r},844:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddLikeUseCase=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.addLike=function(e,t){return this.repository.addLike(e,t)},e}();t.AddLikeUseCase=r},289:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GetLikesUseCase=void 0;var o=function(){function e(e){this.repository=e}return e.prototype.getLikes=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.repository.getLikes(e)]}))}))},e}();t.GetLikesUseCase=o},106:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveLikeUseCase=void 0;var o=function(){function e(e){this.repository=e}return e.prototype.removeLike=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(r){return[2,this.repository.removeLike(e,t)]}))}))},e}();t.RemoveLikeUseCase=o},605:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(738),i=function(){function e(e){this.repository=e}return e.prototype.cresateSummary=function(e){var t=n({id:this.repository.getNextID()},e),r=o.SummaryCreator.createSummary(t);return this.repository.create(r),r},e}();t.default=i},600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSummaryUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.deleteSummary=function(e){return this.repository.delete(e)},e}();t.deleteSummaryUC=r},589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSummariesofAuthorUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAllSumaries=function(e){return this.repository.getSummariesByAuthorId(e)},e}();t.getSummariesofAuthorUC=r},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSummaryByIdUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getSummaryById=function(e){return this.repository.getOne(e)},e}();t.getSummaryByIdUC=r},518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.searchSummariesUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.getAllSumaries=function(e){return this.repository.searchSummaries(e)},e}();t.searchSummariesUC=r},310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateSummaryUC=void 0;var r=function(){function e(e){this.repository=e}return e.prototype.updateSummary=function(e,t){return this.repository.update(e,t)},e}();t.UpdateSummaryUC=r},991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=void 0;t.Summary=function(e){this.name=e.name,this.id=e.id,this.pdf=e.pdf,this.sum_desc=e.sum_desc,this.subject=e.subject,this.career=e.career,this.lenght=e.lenght,this.up_date=e.up_date,this.author_Id=e.author_Id}},738:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryCreator=void 0;var n=r(991),o=function(){function e(){}return e.createSummary=function(e){return new n.Summary(e)},e}();t.SummaryCreator=o},923:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(418)).default.createPool({host:"localhost",user:"root",password:"",database:"summary_db",port:3306}),u=function(){function e(){}return e.prototype.addLike=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=[t,e],console.log(r),[4,a.execute("INSERT INTO Likes (like_id, summary_id, user_id) VALUES ((UUID_TO_BIN(UUID())),(SELECT id FROM Summaries WHERE id = UUID_TO_BIN(?),(SELECT id FROM users WHERE id = UUID_TO_BIN(?)));",r)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeLike=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=[t,e],[4,a.execute("DELETE FROM likes WHERE summary_id = (SELECT id FROM Summaries WHERE name = ? ) AND user_id = (SELECT id FROM users WHERE name = ? );",r)];case 1:return[2,n.sent()]}}))}))},e.prototype.getLikes=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,a.execute("SELECT likes FROM Summaries WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()[0]]}}))}))},e}();t.default=u},287:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(418)),u=r(113),s=a.default.createPool({host:"localhost",user:"root",password:"",database:"summary_db",port:3306}),c=function(){function e(){}return e.prototype.getNextID=function(){return(0,u.randomUUID)()},e.prototype.getAll=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,s.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,author_Id FROM Summaries LIMIT ? OFFSET ?;",[e,t])];case 1:return[2,r.sent()[0]]}}))}))},e.prototype.searchSummaries=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=["%".concat(e,"%")],[4,s.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,author_Id FROM Summaries WHERE name LIKE ?;",t)];case 1:return[2,r.sent()[0]]}}))}))},e.prototype.getSummariesByAuthorId=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,s.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,author_Id FROM Summaries WHERE author_Id = (?);",t)];case 1:return[2,r.sent()[0]]}}))}))},e.prototype.create=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e.id,e.name,e.lenght,e.up_date,e.sum_desc,e.pdf,e.career,e.subject,e.author_Id],[4,s.execute("INSERT INTO Summaries(id,name,lenght,up_date,sum_desc,pdf,career,subject,author_Id) VALUES(UUID_TO_BIN(?), ?,?, ?, ?, ?, ?, ?, ?,?);",t)];case 1:return r.sent(),[2]}}))}))},e.prototype.getOne=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,s.execute("SELECT BIN_TO_UUID(id) as id,name,lenght,up_date,sum_desc,pdf,career,subject,author_Id FROM Summaries WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()[0][0]]}}))}))},e.prototype.delete=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=[e],[4,s.execute("DELETE FROM Summaries WHERE id = UUID_TO_BIN(?);",t)];case 1:return[2,r.sent()]}}))}))},e.prototype.update=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=[t,e],[4,s.execute("UPDATE Summaries SET name = ? WHERE id = UUID_TO_BIN(?);",r)];case 1:return[2,n.sent()]}}))}))},e}();t.default=c},192:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDSummarySchemaValidation=void 0;var n=r(316);t.IDSummarySchemaValidation=n.z.object({id:n.z.string().uuid()})},770:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LikesSchemaValidation=void 0;var n=r(316);t.LikesSchemaValidation=n.z.object({summary_id:n.z.string().uuid(),user_id:n.z.string().uuid()})},631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadSummarySchemaValidation=void 0;var n=r(316);t.UploadSummarySchemaValidation=n.z.object({name:n.z.string(),pdf:n.z.string(),sum_desc:n.z.string(),subject:n.z.string(),career:n.z.string(),lenght:n.z.number(),up_date:n.z.string(),likes:n.z.number(),author_Id:n.z.string().uuid()})},55:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LikeController=void 0;var i=r(844),a=r(289),u=r(106),s=r(192),c=r(770),l=function(){function e(){}return e.prototype.addLike=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){return r=c.LikesSchemaValidation.safeParse(t),console.log(r),r.success?[2,new i.AddLikeUseCase(e).addLike(r.data.user_id,r.data.summary_id)]:[2,r.error]}))}))},e.prototype.removeLike=function(e,t,r){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){return(n=c.LikesSchemaValidation.safeParse({userId:t,summaryId:r})).success?[2,new u.RemoveLikeUseCase(e).removeLike(t,r)]:[2,n.error]}))}))},e.prototype.getLikes=function(e,t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){return r=s.IDSummarySchemaValidation.safeParse({summaryId:t}),console.log(r),r.success?[2,new a.GetLikesUseCase(e).getLikes(r.data.id)]:(console.log(r),[2,r.error])}))}))},e}();t.LikeController=l},954:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryController=void 0;var a=r(981),u=i(r(605)),s=r(600),c=r(589),l=r(962),f=r(518),d=r(310),p=r(192),h=r(631),y=function(){function e(){}return e.prototype.getAllSumaries=function(e,t,r){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,new a.getAllSummariesUC(e).getAllSumaries(t,r)];case 1:return[2,n.sent()]}}))}))},e.prototype.searchSummaries=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,new f.searchSummariesUC(t).getAllSumaries(e)];case 1:return[2,r.sent()]}}))}))},e.prototype.getSummariesByAuthorId=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,new c.getSummariesofAuthorUC(t).getAllSumaries(e)];case 1:return[2,r.sent()]}}))}))},e.prototype.getSummaryById=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return r=new l.getSummaryByIdUC(t),(n=p.IDSummarySchemaValidation.safeParse({id:e})).success?[4,r.getSummaryById(n.data.id)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,n.error]}}))}))},e.prototype.createSummary=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){return r=h.UploadSummarySchemaValidation.safeParse(e),n=new u.default(t),r.success?[2,n.cresateSummary(r.data)]:[2,r.error]}))}))},e.prototype.deleteSummary=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return r=new s.deleteSummaryUC(t),(n=p.IDSummarySchemaValidation.safeParse({id:e})).success?[4,r.deleteSummary(n.data.id)]:[3,2];case 1:return[2,{afectedRows:o.sent()[0].affectedRows}];case 2:return[2,n.error]}}))}))},e.prototype.updateSummary=function(e,t,r){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return(n=p.IDSummarySchemaValidation.safeParse({id:e})).success&&t?[4,new d.UpdateSummaryUC(r).updateSummary(n.data.id,t)]:[3,2];case 1:return[2,{afectedRows:o.sent()[0].affectedRows}];case 2:if(!n.success)return[2,n.error];o.label=3;case 3:return[2]}}))}))},e}();t.SummaryController=y},127:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LikeHandler=void 0;var o=n(r(923)),i=r(55),a=n(r(860));t.LikeHandler=function(){var e=new o.default,t=new i.LikeController,r=a.default.Router();return r.get("/",(function(r,n){var o;o="string"==typeof r.query.summaryId?r.query.summaryId:"",t.getLikes(e,o).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):n.json(e)}))})),r.post("/",(function(r,n){r.body.user_id,r.body.summary_id,t.addLike(e,r.body).then((function(e){e instanceof Error?n.status(404).json({paginator:e,message:"Error al dar like"}):n.json(e)}))})),r.delete("/",(function(r,n){var o=r.body.user_id,i=r.body.summary_id;t.removeLike(e,o,i).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):n.json(e)}))})),r}},592:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryHandler=void 0;var o=n(r(287)),i=n(r(860)),a=r(954);t.SummaryHandler=function(){var e=new o.default,t=new a.SummaryController,r=i.default.Router();return r.get("/",(function(r,n){var o,i=r.query.limit||10,a=r.query.offset||0;(""!==(o="string"==typeof r.query.searchTerm?r.query.searchTerm:"")?t.searchSummaries(o,e):t.getAllSumaries(e,i.toString(),a.toString())).then((function(e){n.json(e)}))})),r.get("/author/:id",(function(r,n){var o=r.params.id;t.getSummariesByAuthorId(o,e).then((function(e){n.json(e)}))})),r.get("/:id",(function(r,n){var o=r.params.id;t.getSummaryById(o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):void 0===e?n.status(404).json({message:"Elemento no encontrado"}):n.json(e)}))})),r.post("/",(function(r,n){t.createSummary(r.body,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):n.json(e)}))})),r.delete("/:id",(function(r,n){var o=r.params.id;t.deleteSummary(o,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):0===e.afectedRows?n.status(404).json({message:"Elemento no encontrado"}):n.json(e)}))})),r.post("/:id",(function(r,n){var o=r.params.id;t.updateSummary(o,r.body.name,e).then((function(e){e instanceof Error?n.status(404).json({paginator:e}):0===(null==e?void 0:e.afectedRows)?n.status(404).json({message:"Elemento no encontrado"}):1===(null==e?void 0:e.afectedRows)?n.json("Elemento actualizado"):n.json(e)}))})),r}},860:e=>{e.exports=require("express")},418:e=>{e.exports=require("mysql2/promise")},316:e=>{e.exports=require("zod")},113:e=>{e.exports=require("crypto")}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(341)})();